# ğŸœ FoodDecisionAssistant - é¡¹ç›®æ€»ç»“

## ğŸ“± é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªå®Œæ•´çš„ã€**å¯ç›´æ¥æ„å»º**çš„å®‰å“ç«¯é¤é£Ÿæ¨èåº”ç”¨ï¼

| ç‰¹æ€§ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| **å½“å‰æ¨¡å¼** | æ¨¡æ‹Ÿæ¨ç†ï¼ˆæ— éœ€çœŸå®æ¨¡å‹ï¼‰ | âœ… å¯ç”¨ |
| **å®Œæ•´ä»£ç ** | æ‰€æœ‰æ¨¡å—å·²å®ç° | âœ… å®Œæˆ |
| **å¯ç›´æ¥æ„å»º** | ç”Ÿæˆå¯å®‰è£… APK | âœ… å®Œæˆ |
| **UI ç•Œé¢** | Jetpack Compose å®ç° | âœ… å®Œæˆ |
| **çœŸå® MNN é›†æˆ** | é¢„ç•™æ¥å£ï¼Œå¯æ— ç¼åˆ‡æ¢ | â³ å¾…æ¨¡å‹ |

---

## ğŸ“ å®Œæ•´é¡¹ç›®ç»“æ„

```
FoodDecisionAssistant/
â”‚
â”œâ”€â”€ ğŸ“„ é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                       # é¡¹ç›®ä»‹ç»å’Œæ¶æ„å›¾
â”‚   â”œâ”€â”€ BUILD_APK_GUIDE.md              # ğŸ“˜ APK æ„å»ºè¯¦ç»†æŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md              # æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ CHECKLIST.md                    # å¿«é€Ÿæ£€æŸ¥æ¸…å•
â”‚
â”œâ”€â”€ ğŸ“š æŠ€æœ¯æ–‡æ¡£ (docs/)
â”‚   â”œâ”€â”€ 01-ç¯å¢ƒæ­å»º.md                   # Android Studio + MNN é…ç½®
â”‚   â”œâ”€â”€ 02-æ¨¡å‹å‡†å¤‡.md                   # æ¨¡å‹ä¸‹è½½/è½¬æ¢/é›†æˆ
â”‚   â”œâ”€â”€ 03-æ ¸å¿ƒå¼€å‘.md                   # æ•°æ®åº“ + æç¤ºè¯ + UI
â”‚   â””â”€â”€ 04-ä¼˜åŒ–è°ƒè¯•.md                   # æ€§èƒ½ä¼˜åŒ– + é—®é¢˜æ’æŸ¥
â”‚
â”œâ”€â”€ ğŸ§¬ æ¨¡å‹è„šæœ¬ (models/)
â”‚   â”œâ”€â”€ download_models.sh              # Linux/Mac ä¸‹è½½è„šæœ¬
â”‚   â””â”€â”€ download_models.ps1             # Windows ä¸‹è½½è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ”§ Gradle é…ç½®
â”‚   â”œâ”€â”€ build.gradle.kts                # æ ¹é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ settings.gradle.kts             # é¡¹ç›®è®¾ç½®
â”‚   â”œâ”€â”€ gradle.properties               # Gradle å±æ€§
â”‚   â”œâ”€â”€ gradlew / gradlew.bat           # Gradle wrapper
â”‚   â””â”€â”€ gradle/wrapper/
â”‚
â””â”€â”€ ğŸ“± Android åº”ç”¨ (app/)
    â”œâ”€â”€ build.gradle.kts                # åº”ç”¨çº§ Gradle é…ç½®
    â””â”€â”€ src/main/
        â”œâ”€â”€ AndroidManifest.xml         # åº”ç”¨æ¸…å•
        â”‚
        â”œâ”€â”€ java/com/foodassistant/
        â”‚   â”œâ”€â”€ FoodApplication.kt      # åº”ç”¨å…¥å£ âœ…
        â”‚   â”œâ”€â”€ MainActivity.kt         # ä¸»æ´»åŠ¨ âœ…
        â”‚   â”‚
        â”‚   â”œâ”€â”€ data/
        â”‚   â”‚   â”œâ”€â”€ local/
        â”‚   â”‚   â”‚   â”œâ”€â”€ AppDatabase.kt      # Room æ•°æ®åº“ âœ…
        â”‚   â”‚   â”‚   â”œâ”€â”€ PreferenceDao.kt    # DAO æ¥å£ âœ…
        â”‚   â”‚   â”‚   â””â”€â”€ UserPreference.kt   # æ•°æ®å®ä½“ âœ…
        â”‚   â”‚   â””â”€â”€ model/
        â”‚   â”‚       â””â”€â”€ Recommendation.kt   # æ¨èæ¨¡å‹ âœ…
        â”‚   â”‚
        â”‚   â”œâ”€â”€ mnn/
        â”‚   â”‚   â””â”€â”€ MNNInferenceManager.kt  # MNN æ¨ç†ç®¡ç†å™¨ âœ…
        â”‚   â”‚                                  # (å«æ¨¡æ‹Ÿæ¨¡å¼)
        â”‚   â”‚
        â”‚   â”œâ”€â”€ prompt/
        â”‚   â”‚   â””â”€â”€ PromptBuilder.kt        # æç¤ºè¯æ„å»ºå™¨ âœ…
        â”‚   â”‚
        â”‚   â””â”€â”€ ui/
        â”‚       â”œâ”€â”€ MainViewModel.kt        # ä¸šåŠ¡é€»è¾‘ VM âœ…
        â”‚       â”œâ”€â”€ theme/
        â”‚       â”‚   â”œâ”€â”€ Color.kt            # ä¸»é¢˜é¢œè‰² âœ…
        â”‚       â”‚   â”œâ”€â”€ Theme.kt            # ä¸»é¢˜é…ç½® âœ…
        â”‚       â”‚   â””â”€â”€ Type.kt             # å­—ä½“é…ç½® âœ…
        â”‚       â””â”€â”€ screens/
        â”‚           â””â”€â”€ MainScreen.kt       # ä¸»ç•Œé¢ âœ…
        â”‚
        â””â”€â”€ res/
            â”œâ”€â”€ values/
            â”‚   â”œâ”€â”€ strings.xml             # å­—ç¬¦ä¸²èµ„æº âœ…
            â”‚   â”œâ”€â”€ colors.xml              # é¢œè‰²èµ„æº âœ…
            â”‚   â””â”€â”€ themes.xml              # ä¸»é¢˜èµ„æº âœ…
            â”œâ”€â”€ drawable/
            â”‚   â”œâ”€â”€ splash_background.xml   # å¯åŠ¨èƒŒæ™¯ âœ…
            â”‚   â””â”€â”€ ic_launcher_foreground.xml # å›¾æ ‡ âœ…
            â”œâ”€â”€ mipmap-anydpi-v26/
            â”‚   â”œâ”€â”€ ic_launcher.xml         # è‡ªé€‚åº”å›¾æ ‡ âœ…
            â”‚   â””â”€â”€ ic_launcher_round.xml   # åœ†å½¢å›¾æ ‡ âœ…
            â””â”€â”€ xml/
                â”œâ”€â”€ file_paths.xml          # æ–‡ä»¶è·¯å¾„é…ç½® âœ…
                â”œâ”€â”€ backup_rules.xml        # å¤‡ä»½è§„åˆ™ âœ…
                â””â”€â”€ data_extraction_rules.xml # æ•°æ®æå–è§„åˆ™ âœ…
```

---

## âœ… å·²å®ç°åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ‹ç…§/é€‰å›¾** - æ”¯æŒç›¸æœºæ‹ç…§å’Œç›¸å†Œé€‰æ‹©
- âœ… **æ™ºèƒ½æ¨è** - åŸºäºç”¨æˆ·åå¥½å’Œæ—¶é—´çš„é¤é£Ÿæ¨è
- âœ… **æ¨èå±•ç¤º** - å¡ç‰‡å¼ UIï¼Œæ˜¾ç¤ºèœå“ã€èœç³»ã€ç†ç”±ã€è¥å…»ä¿¡æ¯
- âœ… **ç”¨æˆ·åé¦ˆ** - å–œæ¬¢/ä¸å–œæ¬¢æŒ‰é’®ï¼Œç”¨äºå­¦ä¹ ç”¨æˆ·åå¥½
- âœ… **æœ¬åœ°å­˜å‚¨** - Room æ•°æ®åº“ä¿å­˜å†å²å’Œåå¥½
- âœ… **å¿«é€Ÿæ¨è** - ä¸€é”®éšæœºæ¨è

### å½“å‰æ¨¡å¼ï¼šæ¨¡æ‹Ÿæ¨ç†
```kotlin
// MNNInferenceManager.kt ä¸­å¯åˆ‡æ¢
const val MOCK_MODE = true  // â† å½“å‰ä¸ºæ¨¡æ‹Ÿæ¨¡å¼
```

æ¨¡æ‹Ÿæ¨¡å¼æä¾›ï¼š
- 6 ç§é¢„è®¾æ¨èï¼ˆéº»å©†è±†è…ã€æ¸…è’¸é²ˆé±¼ã€ç•ªèŒ„é¸¡è›‹é¢ç­‰ï¼‰
- æ™ºèƒ½å…³é”®è¯åŒ¹é…ï¼ˆè¾£â†’å·èœï¼Œæ¸…æ·¡â†’ç²¤èœç­‰ï¼‰
- 1.5 ç§’æ¨¡æ‹Ÿæ¨ç†å»¶è¿Ÿï¼Œä½“éªŒæ¥è¿‘çœŸå®

### é¢„ç•™çš„ MNN é›†æˆæ¥å£
å½“å‡†å¤‡å¥½ Qwen2-VL-2B-Int4.mnn æ¨¡å‹åï¼š
1. å°†æ¨¡å‹æ”¾å…¥ `app/src/main/assets/models/`
2. ä¿®æ”¹ `MOCK_MODE = false`
3. é›†æˆ `libMNN.so` åº“
4. å³å¯åˆ‡æ¢ä¸ºçœŸå® AI æ¨ç†

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡ï¼ˆ5åˆ†é’Ÿï¼‰
- å®‰è£… [Android Studio Hedgehog+](https://developer.android.com/studio)
- å®‰è£… SDK 34ã€NDK 25.2.xã€CMake 3.22.1

### 2. æ‰“å¼€é¡¹ç›®ï¼ˆ2åˆ†é’Ÿï¼‰
```
Android Studio â†’ Open â†’ é€‰æ‹© FoodDecisionAssistant æ–‡ä»¶å¤¹
ç­‰å¾… Gradle åŒæ­¥å®Œæˆ
```

### 3. æ„å»º APKï¼ˆ3åˆ†é’Ÿï¼‰
```bash
# æ–¹å¼ 1: Android Studio
Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)

# æ–¹å¼ 2: å‘½ä»¤è¡Œ
./gradlew assembleDebug  # Mac/Linux
gradlew.bat assembleDebug  # Windows
```

### 4. å®‰è£…è¿è¡Œ
```bash
adb install app/build/outputs/apk/debug/app-debug.apk
```

**è¯¦ç»†æ­¥éª¤**è¯·å‚è€ƒ [BUILD_APK_GUIDE.md](./BUILD_APK_GUIDE.md)

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| Kotlin æºæ–‡ä»¶ | 15+ |
| XML èµ„æºæ–‡ä»¶ | 10+ |
| ä»£ç è¡Œæ•° | ~3000 |
| åŠŸèƒ½æ¨¡å— | 8 |
| æ„å»ºé…ç½® | å®Œæ•´ |

---

## ğŸ¯ ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ä½¿ç”¨
1. æ‰“å¼€åº”ç”¨
2. ç‚¹å‡»"å¸®æˆ‘é€‰"è·å–å³æ—¶æ¨è
3. æˆ–ä¸Šä¼ é£Ÿç‰©å›¾ç‰‡ï¼Œè¾“å…¥åå¥½ï¼Œç‚¹å‡»"è·å–æ¨è"
4. ç”¨ ğŸ‘/ğŸ‘ åé¦ˆæ¨èç»“æœ

### åå¥½å­¦ä¹ 
- åº”ç”¨ä¼šè‡ªåŠ¨è®°å½•ä½ å–œæ¬¢çš„èœç³»
- é¿å…æ¨èæœ€è¿‘åƒè¿‡çš„é£Ÿç‰©
- æ ¹æ®æ—¶é—´æ™ºèƒ½æ¨èæ—©/åˆ/æ™šé¤

---

## ğŸ”§ åˆ‡æ¢çœŸå® MNN æ¨ç†

å½“å‰ä¸ºæ¨¡æ‹Ÿæ¨¡å¼ï¼Œè‹¥è¦ä½¿ç”¨çœŸå® AIï¼š

1. **ä¸‹è½½æ¨¡å‹** (1.5GB)
   ```bash
   .\models\download_models.ps1  # Windows
   ```

2. **æ”¾ç½®æ¨¡å‹**
   ```
   app/src/main/assets/models/Qwen2-VL-2B-Int4.mnn
   ```

3. **ä¸‹è½½ MNN åº“**
   - ä» [MNN Releases](https://github.com/alibaba/MNN/releases) ä¸‹è½½
   - å°† `libMNN.so` æ”¾å…¥ `app/src/main/jniLibs/arm64-v8a/`

4. **åˆ‡æ¢æ¨¡å¼**
   ```kotlin
   // MNNInferenceManager.kt
   const val MOCK_MODE = false  // â† æ”¹ä¸º false
   ```

5. **é‡æ–°æ„å»º**
   ```bash
   ./gradlew assembleDebug
   ```

---

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶

æ„å»ºå®Œæˆåï¼š
```
app/build/outputs/apk/
â”œâ”€â”€ debug/
â”‚   â””â”€â”€ app-debug.apk          # ~15-20MB
â””â”€â”€ release/
    â””â”€â”€ app-release-unsigned.apk  # ~10-15MB
```

---

## ğŸ‰ ç°åœ¨å¯ä»¥å¼€å§‹æ„å»ºäº†ï¼

æ‰“å¼€ `BUILD_APK_GUIDE.md` è·å–è¯¦ç»†æ„å»ºæ­¥éª¤ã€‚

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸœ
